[
  {
    "kpi_id": "ecommerce_total_revenue_001",
    "domain": "ecommerce",
    "name": "Total Revenue",
    "category": "Financial",
    "priority": 5,
    "formula_expr": "SUM(order_value)",
    "columns_needed": ["order_value"],
    "time_grain": "day",
    "aggregation_type": "sum",
    "description": "Total revenue from all orders",
    "unit": "currency",
    "chart_hint": "timeseries"
  },
  {
    "kpi_id": "ecommerce_order_count_001",
    "domain": "ecommerce",
    "name": "Total Orders",
    "category": "Sales",
    "priority": 5,
    "formula_expr": "COUNT_DISTINCT(order_id)",
    "columns_needed": ["order_id"],
    "time_grain": "day",
    "aggregation_type": "count",
    "description": "Total number of orders placed",
    "unit": "count",
    "chart_hint": "timeseries"
  },
  {
    "kpi_id": "ecommerce_aov_001",
    "domain": "ecommerce",
    "name": "Average Order Value (AOV)",
    "category": "Financial",
    "priority": 5,
    "formula_expr": "AVG(order_value)",
    "columns_needed": ["order_value"],
    "time_grain": "day",
    "aggregation_type": "avg",
    "description": "Average value per order",
    "unit": "currency",
    "chart_hint": "number"
  },
  {
    "kpi_id": "ecommerce_conversion_rate_001",
    "domain": "ecommerce",
    "name": "Conversion Rate %",
    "category": "Sales",
    "priority": 5,
    "formula_expr": "(COUNT_DISTINCT(order_id) / COUNT_DISTINCT(session_id)) * 100",
    "columns_needed": ["order_id", "session_id"],
    "time_grain": "day",
    "aggregation_type": "ratio",
    "description": "Percentage of sessions that result in orders",
    "unit": "percent",
    "chart_hint": "gauge"
  },
  {
    "kpi_id": "ecommerce_shipping_revenue_ratio_001",
    "domain": "ecommerce",
    "name": "Shipping Cost % of Revenue",
    "category": "Operations",
    "priority": 4,
    "formula_expr": "(SUM(shipping_cost) / SUM(order_value)) * 100",
    "columns_needed": ["shipping_cost", "order_value"],
    "time_grain": "day",
    "aggregation_type": "ratio",
    "description": "Shipping costs as percentage of revenue",
    "unit": "percent",
    "chart_hint": "timeseries"
  },
  {
    "kpi_id": "ecommerce_discount_rate_001",
    "domain": "ecommerce",
    "name": "Discount % of Revenue",
    "category": "Financial",
    "priority": 4,
    "formula_expr": "(SUM(discount) / SUM(order_value)) * 100",
    "columns_needed": ["discount", "order_value"],
    "time_grain": "day",
    "aggregation_type": "ratio",
    "description": "Discounts as percentage of total revenue",
    "unit": "percent",
    "chart_hint": "timeseries"
  },
  {
    "kpi_id": "ecommerce_tax_collected_001",
    "domain": "ecommerce",
    "name": "Total Tax Collected",
    "category": "Financial",
    "priority": 3,
    "formula_expr": "SUM(tax)",
    "columns_needed": ["tax"],
    "time_grain": "day",
    "aggregation_type": "sum",
    "description": "Total tax collected from orders",
    "unit": "currency",
    "chart_hint": "timeseries"
  },
  {
    "kpi_id": "ecommerce_fulfillment_rate_001",
    "domain": "ecommerce",
    "name": "Order Fulfillment Rate %",
    "category": "Operations",
    "priority": 5,
    "formula_expr": "(COUNT_DISTINCT(order_id WHERE order_status='Delivered') / COUNT_DISTINCT(order_id)) * 100",
    "columns_needed": ["order_id", "order_status"],
    "time_grain": "day",
    "aggregation_type": "ratio",
    "description": "Percentage of orders successfully delivered",
    "unit": "percent",
    "chart_hint": "gauge"
  },
  {
    "kpi_id": "ecommerce_return_rate_001",
    "domain": "ecommerce",
    "name": "Return Rate %",
    "category": "Operations",
    "priority": 4,
    "formula_expr": "(COUNT_DISTINCT(order_id WHERE order_status='Returned') / COUNT_DISTINCT(order_id)) * 100",
    "columns_needed": ["order_id", "order_status"],
    "time_grain": "day",
    "aggregation_type": "ratio",
    "description": "Percentage of orders returned",
    "unit": "percent",
    "chart_hint": "timeseries"
  },
  {
    "kpi_id": "ecommerce_cart_abandonment_001",
    "domain": "ecommerce",
    "name": "Cart Abandonment Rate %",
    "category": "Sales",
    "priority": 4,
    "formula_expr": "(COUNT_DISTINCT(cart_id WHERE order_id IS NULL) / COUNT_DISTINCT(cart_id)) * 100",
    "columns_needed": ["cart_id", "order_id"],
    "time_grain": "day",
    "aggregation_type": "ratio",
    "description": "Percentage of shopping carts not converted to orders",
    "unit": "percent",
    "chart_hint": "gauge"
  },
  {
    "kpi_id": "ecommerce_payment_success_rate_001",
    "domain": "ecommerce",
    "name": "Payment Success Rate %",
    "category": "Financial",
    "priority": 4,
    "formula_expr": "(COUNT_DISTINCT(order_id WHERE payment_status='Success') / COUNT_DISTINCT(order_id)) * 100",
    "columns_needed": ["order_id", "payment_status"],
    "time_grain": "day",
    "aggregation_type": "ratio",
    "description": "Percentage of successful payments",
    "unit": "percent",
    "chart_hint": "gauge"
  },
  {
    "kpi_id": "ecommerce_revenue_by_channel_001",
    "domain": "ecommerce",
    "name": "Revenue by Channel",
    "category": "Marketing",
    "priority": 4,
    "formula_expr": "SUM(order_value) GROUP BY channel",
    "columns_needed": ["order_value", "channel"],
    "time_grain": "day",
    "aggregation_type": "sum",
    "description": "Revenue breakdown by sales channel",
    "unit": "currency",
    "chart_hint": "bar"
  },
  {
    "kpi_id": "ecommerce_orders_by_platform_001",
    "domain": "ecommerce",
    "name": "Orders by Platform",
    "category": "Operations",
    "priority": 3,
    "formula_expr": "COUNT_DISTINCT(order_id) GROUP BY platform",
    "columns_needed": ["order_id", "platform"],
    "time_grain": "day",
    "aggregation_type": "count",
    "description": "Order count by marketplace platform",
    "unit": "count",
    "chart_hint": "pie"
  },
  {
    "kpi_id": "ecommerce_revenue_by_category_001",
    "domain": "ecommerce",
    "name": "Revenue by Category",
    "category": "Sales",
    "priority": 4,
    "formula_expr": "SUM(order_value) GROUP BY category",
    "columns_needed": ["order_value", "category"],
    "time_grain": "day",
    "aggregation_type": "sum",
    "description": "Revenue breakdown by product category",
    "unit": "currency",
    "chart_hint": "bar"
  },
  {
    "kpi_id": "ecommerce_payment_method_distribution_001",
    "domain": "ecommerce",
    "name": "Payment Method Distribution",
    "category": "Financial",
    "priority": 3,
    "formula_expr": "COUNT_DISTINCT(order_id) GROUP BY payment_method",
    "columns_needed": ["order_id", "payment_method"],
    "time_grain": "day",
    "aggregation_type": "count",
    "description": "Order count by payment method",
    "unit": "count",
    "chart_hint": "pie"
  },
  {
    "kpi_id": "ecommerce_avg_delivery_time_001",
    "domain": "ecommerce",
    "name": "Average Delivery Time (Days)",
    "category": "Operations",
    "priority": 4,
    "formula_expr": "AVG(DATEDIFF(delivery_date, order_date))",
    "columns_needed": ["delivery_date", "order_date"],
    "time_grain": "day",
    "aggregation_type": "avg",
    "description": "Average time from order to delivery",
    "unit": "days",
    "chart_hint": "number"
  },
  {
    "kpi_id": "ecommerce_customer_acquisition_001",
    "domain": "ecommerce",
    "name": "New Customers",
    "category": "Sales",
    "priority": 4,
    "formula_expr": "COUNT_DISTINCT(customer_id WHERE first_order=true)",
    "columns_needed": ["customer_id"],
    "time_grain": "day",
    "aggregation_type": "count",
    "description": "Number of new customers acquired",
    "unit": "count",
    "chart_hint": "timeseries"
  },
  {
    "kpi_id": "ecommerce_repeat_customer_rate_001",
    "domain": "ecommerce",
    "name": "Repeat Customer Rate %",
    "category": "Retention",
    "priority": 4,
    "formula_expr": "(COUNT_DISTINCT(customer_id WHERE order_count > 1) / COUNT_DISTINCT(customer_id)) * 100",
    "columns_needed": ["customer_id"],
    "time_grain": "month",
    "aggregation_type": "ratio",
    "description": "Percentage of customers who place multiple orders",
    "unit": "percent",
    "chart_hint": "gauge"
  },
  {
    "kpi_id": "ecommerce_orders_by_device_001",
    "domain": "ecommerce",
    "name": "Orders by Device Type",
    "category": "Marketing",
    "priority": 3,
    "formula_expr": "COUNT_DISTINCT(order_id) GROUP BY device_type",
    "columns_needed": ["order_id", "device_type"],
    "time_grain": "day",
    "aggregation_type": "count",
    "description": "Order distribution by device (mobile, desktop, tablet)",
    "unit": "count",
    "chart_hint": "pie"
  },
  {
    "kpi_id": "ecommerce_utm_source_revenue_001",
    "domain": "ecommerce",
    "name": "Revenue by UTM Source",
    "category": "Marketing",
    "priority": 3,
    "formula_expr": "SUM(order_value) GROUP BY utm_source",
    "columns_needed": ["order_value", "utm_source"],
    "time_grain": "day",
    "aggregation_type": "sum",
    "description": "Revenue by traffic source",
    "unit": "currency",
    "chart_hint": "bar"
  }
]
