[
  {
    "kpi_id": "saas_mrr_001",
    "domain": "saas",
    "name": "Monthly Recurring Revenue (MRR)",
    "category": "Financial",
    "priority": 5,
    "formula_expr": "SUM(subscription_amount) WHERE billing_period='monthly'",
    "columns_needed": ["subscription_amount"],
    "time_grain": "month",
    "aggregation_type": "sum",
    "description": "Total predictable monthly subscription revenue",
    "unit": "currency",
    "chart_hint": "timeseries"
  },
  {
    "kpi_id": "saas_arr_001",
    "domain": "saas",
    "name": "Annual Recurring Revenue (ARR)",
    "category": "Financial",
    "priority": 5,
    "formula_expr": "SUM(subscription_amount * 12)",
    "columns_needed": ["subscription_amount"],
    "time_grain": "month",
    "aggregation_type": "sum",
    "description": "Annualized value of recurring subscription revenue",
    "unit": "currency",
    "chart_hint": "timeseries"
  },
  {
    "kpi_id": "saas_churn_001",
    "domain": "saas",
    "name": "Churn Rate %",
    "category": "Retention",
    "priority": 5,
    "formula_expr": "(COUNT_DISTINCT(canceled_subscriptions) / COUNT_DISTINCT(active_at_start)) * 100",
    "columns_needed": ["subscription_status", "subscription_id"],
    "time_grain": "month",
    "aggregation_type": "ratio",
    "description": "Percentage of customers who cancel their subscription",
    "unit": "percent",
    "chart_hint": "timeseries"
  },
  {
    "kpi_id": "saas_arpa_001",
    "domain": "saas",
    "name": "Average Revenue Per Account (ARPA)",
    "category": "Financial",
    "priority": 4,
    "formula_expr": "SUM(subscription_amount) / COUNT_DISTINCT(account_id)",
    "columns_needed": ["subscription_amount", "account_id"],
    "time_grain": "month",
    "aggregation_type": "avg",
    "description": "Average revenue generated per customer account",
    "unit": "currency",
    "chart_hint": "timeseries"
  },
  {
    "kpi_id": "saas_new_mrr_001",
    "domain": "saas",
    "name": "New MRR",
    "category": "Growth",
    "priority": 4,
    "formula_expr": "SUM(subscription_amount) WHERE subscription_status='new'",
    "columns_needed": ["subscription_amount", "subscription_status"],
    "time_grain": "month",
    "aggregation_type": "sum",
    "description": "MRR from new customer subscriptions",
    "unit": "currency",
    "chart_hint": "timeseries"
  },
  {
    "kpi_id": "saas_expansion_mrr_001",
    "domain": "saas",
    "name": "Expansion MRR",
    "category": "Growth",
    "priority": 4,
    "formula_expr": "SUM(amount_increase) WHERE event='upgrade'",
    "columns_needed": ["subscription_amount", "subscription_status"],
    "time_grain": "month",
    "aggregation_type": "sum",
    "description": "Additional MRR from existing customer upgrades",
    "unit": "currency",
    "chart_hint": "timeseries"
  },
  {
    "kpi_id": "saas_ltv_001",
    "domain": "saas",
    "name": "Customer Lifetime Value (LTV)",
    "category": "Financial",
    "priority": 4,
    "formula_expr": "ARPA / (Churn Rate / 100)",
    "columns_needed": ["subscription_amount", "account_id", "subscription_status"],
    "time_grain": "month",
    "aggregation_type": "calculated",
    "description": "Predicted revenue from average customer over lifetime",
    "unit": "currency",
    "chart_hint": "number"
  },
  {
    "kpi_id": "saas_cac_001",
    "domain": "saas",
    "name": "Customer Acquisition Cost (CAC)",
    "category": "Financial",
    "priority": 4,
    "formula_expr": "SUM(marketing_spend + sales_spend) / COUNT_DISTINCT(new_accounts)",
    "columns_needed": ["marketing_spend", "sales_spend", "account_id"],
    "time_grain": "month",
    "aggregation_type": "avg",
    "description": "Average cost to acquire a new customer",
    "unit": "currency",
    "chart_hint": "timeseries"
  },
  {
    "kpi_id": "saas_mau_001",
    "domain": "saas",
    "name": "Monthly Active Users (MAU)",
    "category": "Engagement",
    "priority": 4,
    "formula_expr": "COUNT_DISTINCT(user_id) WHERE activity_date IN last_30_days",
    "columns_needed": ["user_id", "activity_date"],
    "time_grain": "month",
    "aggregation_type": "count",
    "description": "Number of unique users active in the month",
    "unit": "count",
    "chart_hint": "timeseries"
  },
  {
    "kpi_id": "saas_nrr_001",
    "domain": "saas",
    "name": "Net Revenue Retention (NRR) %",
    "category": "Retention",
    "priority": 4,
    "formula_expr": "((Starting_MRR + Expansion - Churn - Contraction) / Starting_MRR) * 100",
    "columns_needed": ["subscription_amount", "subscription_status"],
    "time_grain": "month",
    "aggregation_type": "ratio",
    "description": "Revenue retention rate including expansion",
    "unit": "percent",
    "chart_hint": "timeseries"
  },
  {
    "kpi_id": "saas_avg_deal_size_001",
    "domain": "saas",
    "name": "Average Deal Size",
    "category": "Sales",
    "priority": 3,
    "formula_expr": "AVG(subscription_amount) WHERE subscription_status='new'",
    "columns_needed": ["subscription_amount", "subscription_status"],
    "time_grain": "month",
    "aggregation_type": "avg",
    "description": "Average value of new subscriptions",
    "unit": "currency",
    "chart_hint": "number"
  },
  {
    "kpi_id": "saas_trial_conversion_001",
    "domain": "saas",
    "name": "Trial Conversion Rate %",
    "category": "Sales",
    "priority": 3,
    "formula_expr": "(COUNT_DISTINCT(trial_to_paid) / COUNT_DISTINCT(trials)) * 100",
    "columns_needed": ["subscription_status", "account_id"],
    "time_grain": "month",
    "aggregation_type": "ratio",
    "description": "Percentage of trial users converting to paid",
    "unit": "percent",
    "chart_hint": "number"
  }
]
