[
  {
    "kpi_id": "retail_revenue_001",
    "domain": "retail",
    "name": "Total Revenue",
    "category": "Financial",
    "priority": 5,
    "formula_expr": "SUM(order_value)",
    "columns_needed": ["order_value"],
    "time_grain": "day",
    "aggregation_type": "sum",
    "description": "Total revenue from all transactions in period",
    "unit": "currency",
    "chart_hint": "timeseries"
  },
  {
    "kpi_id": "retail_units_001",
    "domain": "retail",
    "name": "Units Sold",
    "category": "Sales",
    "priority": 5,
    "formula_expr": "SUM(quantity)",
    "columns_needed": ["quantity"],
    "time_grain": "day",
    "aggregation_type": "sum",
    "description": "Total number of units sold",
    "unit": "count",
    "chart_hint": "timeseries"
  },
  {
    "kpi_id": "retail_orders_001",
    "domain": "retail",
    "name": "Orders Count",
    "category": "Sales",
    "priority": 5,
    "formula_expr": "COUNT_DISTINCT(order_id)",
    "columns_needed": ["order_id"],
    "time_grain": "day",
    "aggregation_type": "count",
    "description": "Total number of orders placed",
    "unit": "count",
    "chart_hint": "timeseries"
  },
  {
    "kpi_id": "retail_aov_001",
    "domain": "retail",
    "name": "Average Order Value (AOV)",
    "category": "Financial",
    "priority": 4,
    "formula_expr": "AVG(order_value)",
    "columns_needed": ["order_value"],
    "time_grain": "day",
    "aggregation_type": "avg",
    "description": "Average value per order",
    "unit": "currency",
    "chart_hint": "timeseries"
  },
  {
    "kpi_id": "retail_customers_001",
    "domain": "retail",
    "name": "Customers Count",
    "category": "Sales",
    "priority": 4,
    "formula_expr": "COUNT_DISTINCT(customer_id)",
    "columns_needed": ["customer_id"],
    "time_grain": "day",
    "aggregation_type": "count",
    "description": "Total number of unique customers",
    "unit": "count",
    "chart_hint": "number"
  },
  {
    "kpi_id": "retail_profit_001",
    "domain": "retail",
    "name": "Gross Profit",
    "category": "Financial",
    "priority": 4,
    "formula_expr": "SUM(order_value - product_cost)",
    "columns_needed": ["order_value", "product_cost"],
    "time_grain": "day",
    "aggregation_type": "sum",
    "description": "Total profit before operating expenses",
    "unit": "currency",
    "chart_hint": "timeseries"
  },
  {
    "kpi_id": "retail_margin_001",
    "domain": "retail",
    "name": "Gross Margin %",
    "category": "Financial",
    "priority": 4,
    "formula_expr": "(SUM(order_value - product_cost) / SUM(order_value)) * 100",
    "columns_needed": ["order_value", "product_cost"],
    "time_grain": "day",
    "aggregation_type": "ratio",
    "description": "Profit margin as percentage of revenue",
    "unit": "percent",
    "chart_hint": "timeseries"
  },
  {
    "kpi_id": "retail_repeat_001",
    "domain": "retail",
    "name": "Repeat Purchase Rate %",
    "category": "Sales",
    "priority": 4,
    "formula_expr": "COUNT_DISTINCT(customers_with_2+_orders) / COUNT_DISTINCT(all_customers)",
    "columns_needed": ["customer_id", "order_id"],
    "time_grain": "month",
    "aggregation_type": "ratio",
    "description": "Percentage of customers who make repeat purchases",
    "unit": "percent",
    "chart_hint": "number"
  },
  {
    "kpi_id": "retail_inventory_001",
    "domain": "retail",
    "name": "Inventory Turnover",
    "category": "Operations",
    "priority": 4,
    "formula_expr": "SUM(cogs) / AVG(inventory)",
    "columns_needed": ["cogs", "inventory"],
    "time_grain": "month",
    "aggregation_type": "ratio",
    "description": "Rate at which inventory is sold and replaced",
    "unit": "ratio",
    "chart_hint": "number"
  },
  {
    "kpi_id": "retail_revenue_per_customer_001",
    "domain": "retail",
    "name": "Revenue per Customer",
    "category": "Financial",
    "priority": 3,
    "formula_expr": "SUM(order_value) / COUNT_DISTINCT(customer_id)",
    "columns_needed": ["order_value", "customer_id"],
    "time_grain": "month",
    "aggregation_type": "avg",
    "description": "Average revenue generated per customer",
    "unit": "currency",
    "chart_hint": "number"
  },
  {
    "kpi_id": "retail_category_revenue_001",
    "domain": "retail",
    "name": "Sales by Category",
    "category": "Sales",
    "priority": 3,
    "formula_expr": "SUM(order_value) BY category",
    "columns_needed": ["order_value", "category"],
    "time_grain": "day",
    "aggregation_type": "sum",
    "description": "Revenue breakdown by product category",
    "unit": "currency",
    "chart_hint": "pie"
  },
  {
    "kpi_id": "retail_units_per_order_001",
    "domain": "retail",
    "name": "Units per Order",
    "category": "Sales",
    "priority": 3,
    "formula_expr": "AVG(SUM(quantity) per order)",
    "columns_needed": ["quantity", "order_id"],
    "time_grain": "day",
    "aggregation_type": "avg",
    "description": "Average number of units per order",
    "unit": "count",
    "chart_hint": "number"
  },
  {
    "kpi_id": "retail_net_profit_margin_001",
    "domain": "retail",
    "name": "Net Profit Margin %",
    "category": "Profitability",
    "priority": 5,
    "formula_expr": "((SUM(total_sale) - SUM(unit_price * quantity) - SUM(discount) - SUM(shipping_cost)) / SUM(total_sale)) * 100",
    "columns_needed": ["total_sale", "unit_price", "quantity", "discount", "shipping_cost"],
    "time_grain": "day",
    "aggregation_type": "ratio",
    "description": "Net profit margin after all costs",
    "unit": "percent",
    "chart_hint": "timeseries"
  },
  {
    "kpi_id": "retail_discount_impact_001",
    "domain": "retail",
    "name": "Discount % of Sales",
    "category": "Financial",
    "priority": 4,
    "formula_expr": "(SUM(discount) / SUM(total_sale)) * 100",
    "columns_needed": ["discount", "total_sale"],
    "time_grain": "day",
    "aggregation_type": "ratio",
    "description": "Percentage of revenue given as discounts",
    "unit": "percent",
    "chart_hint": "timeseries"
  },
  {
    "kpi_id": "retail_shipping_cost_ratio_001",
    "domain": "retail",
    "name": "Shipping Cost % of Sales",
    "category": "Operations",
    "priority": 3,
    "formula_expr": "(SUM(shipping_cost) / SUM(total_sale)) * 100",
    "columns_needed": ["shipping_cost", "total_sale"],
    "time_grain": "day",
    "aggregation_type": "ratio",
    "description": "Shipping costs as percentage of revenue",
    "unit": "percent",
    "chart_hint": "timeseries"
  },
  {
    "kpi_id": "retail_tax_collected_001",
    "domain": "retail",
    "name": "Total Tax Collected",
    "category": "Financial",
    "priority": 3,
    "formula_expr": "SUM(tax)",
    "columns_needed": ["tax"],
    "time_grain": "day",
    "aggregation_type": "sum",
    "description": "Total tax collected from sales",
    "unit": "currency",
    "chart_hint": "timeseries"
  },
  {
    "kpi_id": "retail_regional_sales_001",
    "domain": "retail",
    "name": "Sales by Region",
    "category": "Geographic",
    "priority": 4,
    "formula_expr": "SUM(total_sale) GROUP BY region",
    "columns_needed": ["total_sale", "region"],
    "time_grain": "day",
    "aggregation_type": "sum",
    "description": "Revenue breakdown by geographic region",
    "unit": "currency",
    "chart_hint": "bar"
  },
  {
    "kpi_id": "retail_store_performance_001",
    "domain": "retail",
    "name": "Sales by Store",
    "category": "Operations",
    "priority": 4,
    "formula_expr": "SUM(total_sale) GROUP BY store_id",
    "columns_needed": ["total_sale", "store_id"],
    "time_grain": "day",
    "aggregation_type": "sum",
    "description": "Revenue by individual store location",
    "unit": "currency",
    "chart_hint": "bar"
  },
  {
    "kpi_id": "retail_sales_rep_performance_001",
    "domain": "retail",
    "name": "Sales Rep Performance",
    "category": "Sales",
    "priority": 3,
    "formula_expr": "SUM(total_sale) GROUP BY sales_rep",
    "columns_needed": ["total_sale", "sales_rep"],
    "time_grain": "day",
    "aggregation_type": "sum",
    "description": "Revenue by sales representative",
    "unit": "currency",
    "chart_hint": "bar"
  },
  {
    "kpi_id": "retail_order_completion_rate_001",
    "domain": "retail",
    "name": "Order Completion Rate %",
    "category": "Operations",
    "priority": 4,
    "formula_expr": "(COUNT_DISTINCT(order_id WHERE order_status='Completed') / COUNT_DISTINCT(order_id)) * 100",
    "columns_needed": ["order_id", "order_status"],
    "time_grain": "day",
    "aggregation_type": "ratio",
    "description": "Percentage of orders successfully completed",
    "unit": "percent",
    "chart_hint": "gauge"
  },
  {
    "kpi_id": "retail_return_rate_001",
    "domain": "retail",
    "name": "Return Rate %",
    "category": "Operations",
    "priority": 4,
    "formula_expr": "(COUNT_DISTINCT(order_id WHERE order_status='Returned') / COUNT_DISTINCT(order_id)) * 100",
    "columns_needed": ["order_id", "order_status"],
    "time_grain": "day",
    "aggregation_type": "ratio",
    "description": "Percentage of orders returned by customers",
    "unit": "percent",
    "chart_hint": "timeseries"
  },
  {
    "kpi_id": "retail_payment_method_distribution_001",
    "domain": "retail",
    "name": "Payment Method Distribution",
    "category": "Financial",
    "priority": 3,
    "formula_expr": "COUNT_DISTINCT(order_id) GROUP BY payment_method",
    "columns_needed": ["order_id", "payment_method"],
    "time_grain": "day",
    "aggregation_type": "count",
    "description": "Order count by payment method",
    "unit": "count",
    "chart_hint": "pie"
  },
  {
    "kpi_id": "retail_avg_discount_per_order_001",
    "domain": "retail",
    "name": "Average Discount per Order",
    "category": "Financial",
    "priority": 3,
    "formula_expr": "AVG(discount)",
    "columns_needed": ["discount"],
    "time_grain": "day",
    "aggregation_type": "avg",
    "description": "Average discount amount per order",
    "unit": "currency",
    "chart_hint": "number"
  },
  {
    "kpi_id": "retail_avg_tax_per_order_001",
    "domain": "retail",
    "name": "Average Tax per Order",
    "category": "Financial",
    "priority": 2,
    "formula_expr": "AVG(tax)",
    "columns_needed": ["tax"],
    "time_grain": "day",
    "aggregation_type": "avg",
    "description": "Average tax amount per order",
    "unit": "currency",
    "chart_hint": "number"
  },
  {
    "kpi_id": "retail_avg_shipping_cost_001",
    "domain": "retail",
    "name": "Average Shipping Cost",
    "category": "Operations",
    "priority": 3,
    "formula_expr": "AVG(shipping_cost)",
    "columns_needed": ["shipping_cost"],
    "time_grain": "day",
    "aggregation_type": "avg",
    "description": "Average shipping cost per order",
    "unit": "currency",
    "chart_hint": "number"
  },
  {
    "kpi_id": "retail_gross_profit_001",
    "domain": "retail",
    "name": "Gross Profit",
    "category": "Profitability",
    "priority": 5,
    "formula_expr": "SUM(total_sale - (unit_price * quantity))",
    "columns_needed": ["total_sale", "unit_price", "quantity"],
    "time_grain": "day",
    "aggregation_type": "sum",
    "description": "Total gross profit before other costs",
    "unit": "currency",
    "chart_hint": "timeseries"
  },
  {
    "kpi_id": "retail_gross_margin_percent_001",
    "domain": "retail",
    "name": "Gross Margin %",
    "category": "Profitability",
    "priority": 5,
    "formula_expr": "((SUM(total_sale) - SUM(unit_price * quantity)) / SUM(total_sale)) * 100",
    "columns_needed": ["total_sale", "unit_price", "quantity"],
    "time_grain": "day",
    "aggregation_type": "ratio",
    "description": "Gross profit margin percentage",
    "unit": "percent",
    "chart_hint": "timeseries"
  },
  {
    "kpi_id": "retail_orders_by_region_001",
    "domain": "retail",
    "name": "Orders by Region",
    "category": "Geographic",
    "priority": 3,
    "formula_expr": "COUNT_DISTINCT(order_id) GROUP BY region",
    "columns_needed": ["order_id", "region"],
    "time_grain": "day",
    "aggregation_type": "count",
    "description": "Order count by geographic region",
    "unit": "count",
    "chart_hint": "bar"
  },
  {
    "kpi_id": "retail_revenue_per_store_001",
    "domain": "retail",
    "name": "Average Revenue per Store",
    "category": "Operations",
    "priority": 3,
    "formula_expr": "AVG(SUM(total_sale) GROUP BY store_id)",
    "columns_needed": ["total_sale", "store_id"],
    "time_grain": "day",
    "aggregation_type": "avg",
    "description": "Average revenue across all stores",
    "unit": "currency",
    "chart_hint": "number"
  },
  {
    "kpi_id": "retail_top_sales_reps_001",
    "domain": "retail",
    "name": "Top 10 Sales Representatives",
    "category": "Sales",
    "priority": 3,
    "formula_expr": "TOP_N(10, SUM(total_sale) GROUP BY sales_rep)",
    "columns_needed": ["total_sale", "sales_rep"],
    "time_grain": "day",
    "aggregation_type": "sum",
    "description": "Top performing sales representatives by revenue",
    "unit": "currency",
    "chart_hint": "bar"
  }
]
